{"version":3,"file":"index.js","sources":["../src/imgPreload.js"],"sourcesContent":["export default function lcImgPreload(list = [], opt = {}) {\r\n  const totalLen = list.length\r\n  let allData = []\r\n  let loadedLength = 0\r\n  let successNum = 0\r\n  let failNum = 0\r\n  function imgLoad(status, url, index) {\r\n    loadedLength++\r\n    status === 'success' ? successNum++ : failNum++\r\n    let obj = {\r\n      status: status,\r\n      index: index,\r\n      url: url\r\n    }\r\n    let speed = {\r\n      success: successNum,\r\n      fail: failNum,\r\n      total: totalLen\r\n    }\r\n    opt.each && opt.each(obj, speed)\r\n    allData[index] = obj\r\n    if (opt.all && loadedLength === totalLen) {\r\n      opt.all(allData, speed)\r\n    }\r\n  }\r\n\r\n  list.forEach((p1, p2) => {\r\n    let img = new Image()\r\n    img.src = p1\r\n    img.onload = function () {\r\n      imgLoad('success', p1, p2)\r\n    }\r\n    img.onerror = function () {\r\n      imgLoad('fail', p1, p2)\r\n    }\r\n  })\r\n}\r\n"],"names":["list","opt","totalLen","length","allData","loadedLength","successNum","failNum","imgLoad","status","url","index","obj","speed","success","fail","total","each","all","forEach","p1","p2","img","Image","src","onload","onerror"],"mappings":"mPAAe,eAAsBA,yDAAO,GAAIC,yDAAM,GAC9CC,EAAWF,EAAKG,OAClBC,EAAU,GACVC,EAAe,EACfC,EAAa,EACbC,EAAU,WACLC,EAAQC,EAAQC,EAAKC,GAC5BN,IACW,YAAXI,EAAuBH,IAAeC,QAClCK,EAAM,CACRH,OAAQA,EACRE,MAAOA,EACPD,IAAKA,GAEHG,EAAQ,CACVC,QAASR,EACTS,KAAMR,EACNS,MAAOd,GAETD,EAAIgB,MAAQhB,EAAIgB,KAAKL,EAAKC,GAC1BT,EAAQO,GAASC,EACbX,EAAIiB,KAAOb,IAAiBH,GAC9BD,EAAIiB,IAAId,EAASS,GAIrBb,EAAKmB,QAAQ,SAACC,EAAIC,OACZC,EAAM,IAAIC,MACdD,EAAIE,IAAMJ,EACVE,EAAIG,OAAS,WACXjB,EAAQ,UAAWY,EAAIC,IAEzBC,EAAII,QAAU,WACZlB,EAAQ,OAAQY,EAAIC"}